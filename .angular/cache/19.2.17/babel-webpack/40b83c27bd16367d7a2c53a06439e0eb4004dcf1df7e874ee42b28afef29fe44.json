{"ast":null,"code":"import { Actions, createEffect, ofType } from '@ngrx/effects';\nimport * as FormsActions from './forms.actions';\nimport { IndexedDbService } from '../../core/services/indexeddb.service';\nimport { from } from 'rxjs';\nimport { switchMap, map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/effects\";\nimport * as i2 from \"../../core/services/indexeddb.service\";\nexport let FormsEffects = /*#__PURE__*/(() => {\n  class FormsEffects {\n    constructor(actions$, db) {\n      this.actions$ = actions$;\n      this.db = db;\n      this.load$ = createEffect(() => this.actions$.pipe(ofType(FormsActions.loadForms), switchMap(() => from(this.db.getForms()).pipe(map(forms => FormsActions.loadFormsSuccess({\n        forms\n      }))))));\n      this.save$ = createEffect(() => this.actions$.pipe(ofType(FormsActions.saveForm), switchMap(({\n        form\n      }) => from(this.db.saveForm(form)).pipe(map(saved => FormsActions.saveFormSuccess({\n        form: saved\n      }))))));\n    }\n    static {\n      this.ɵfac = function FormsEffects_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || FormsEffects)(i0.ɵɵinject(i1.Actions), i0.ɵɵinject(i2.IndexedDbService));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: FormsEffects,\n        factory: FormsEffects.ɵfac\n      });\n    }\n  }\n  return FormsEffects;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}