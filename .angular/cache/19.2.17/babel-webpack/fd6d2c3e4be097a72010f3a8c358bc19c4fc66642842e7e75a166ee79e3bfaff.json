{"ast":null,"code":"import _asyncToGenerator from \"D:/form-builder-angular19-updated/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Store } from '@ngrx/store';\nimport { loadForms } from '../state/forms/forms.actions';\nimport { IndexedDBService } from '../core/services/indexeddb.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/store\";\nimport * as i2 from \"../core/services/indexeddb.service\";\nfunction BuilderComponent_div_21_div_7_div_10_label_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"label\");\n    i0.ɵɵtext(1, \"Options (comma) \");\n    i0.ɵɵelementStart(2, \"input\", 18);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function BuilderComponent_div_21_div_7_div_10_label_4_Template_input_ngModelChange_2_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const el_r5 = i0.ɵɵnextContext(2).$implicit;\n      i0.ɵɵtwoWayBindingSet(el_r5.optionsString, $event) || (el_r5.optionsString = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵlistener(\"blur\", function BuilderComponent_div_21_div_7_div_10_label_4_Template_input_blur_2_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const el_r5 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.syncOptions(el_r5));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const el_r5 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", el_r5.optionsString);\n  }\n}\nfunction BuilderComponent_div_21_div_7_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 14)(1, \"label\");\n    i0.ɵɵtext(2, \"Label \");\n    i0.ɵɵelementStart(3, \"input\", 15);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function BuilderComponent_div_21_div_7_div_10_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const el_r5 = i0.ɵɵnextContext().$implicit;\n      i0.ɵɵtwoWayBindingSet(el_r5.label, $event) || (el_r5.label = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(4, BuilderComponent_div_21_div_7_div_10_label_4_Template, 3, 1, \"label\", 16);\n    i0.ɵɵelementStart(5, \"label\");\n    i0.ɵɵtext(6, \"Placeholder \");\n    i0.ɵɵelementStart(7, \"input\", 15);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function BuilderComponent_div_21_div_7_div_10_Template_input_ngModelChange_7_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const el_r5 = i0.ɵɵnextContext().$implicit;\n      i0.ɵɵtwoWayBindingSet(el_r5.placeholder, $event) || (el_r5.placeholder = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"label\")(9, \"input\", 17);\n    i0.ɵɵtwoWayListener(\"ngModelChange\", function BuilderComponent_div_21_div_7_div_10_Template_input_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const el_r5 = i0.ɵɵnextContext().$implicit;\n      i0.ɵɵtwoWayBindingSet(el_r5.required, $event) || (el_r5.required = $event);\n      return i0.ɵɵresetView($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10, \" Required\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const el_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", el_r5.label);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", el_r5.type === \"select\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtwoWayProperty(\"ngModel\", el_r5.placeholder);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtwoWayProperty(\"ngModel\", el_r5.required);\n  }\n}\nfunction BuilderComponent_div_21_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"small\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 12)(6, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function BuilderComponent_div_21_div_7_Template_button_click_6_listener() {\n      const el_r5 = i0.ɵɵrestoreView(_r4).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r2.selectElement(el_r5));\n    });\n    i0.ɵɵtext(7, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function BuilderComponent_div_21_div_7_Template_button_click_8_listener() {\n      const i_r6 = i0.ɵɵrestoreView(_r4).index;\n      const pi_r2 = i0.ɵɵnextContext().index;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.removeField(pi_r2, i_r6));\n    });\n    i0.ɵɵtext(9, \"Remove\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(10, BuilderComponent_div_21_div_7_div_10_Template, 11, 4, \"div\", 13);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const el_r5 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(el_r5.label || el_r5.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"(\", el_r5.type, \")\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.selectedElement === el_r5);\n  }\n}\nfunction BuilderComponent_div_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 7)(1, \"div\", 8)(2, \"h3\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 3);\n    i0.ɵɵlistener(\"click\", function BuilderComponent_div_21_Template_button_click_4_listener() {\n      const pi_r2 = i0.ɵɵrestoreView(_r1).index;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.removePage(pi_r2));\n    });\n    i0.ɵɵtext(5, \"Delete\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 9);\n    i0.ɵɵtemplate(7, BuilderComponent_div_21_div_7_Template, 11, 3, \"div\", 10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const page_r9 = ctx.$implicit;\n    const pi_r2 = ctx.index;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(page_r9.title || \"Page \" + (pi_r2 + 1));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", page_r9.elements);\n  }\n}\nexport let BuilderComponent = /*#__PURE__*/(() => {\n  class BuilderComponent {\n    constructor(store, db) {\n      this.store = store;\n      this.db = db;\n      this.schema = {\n        title: 'New Form',\n        pages: [{\n          id: 'page-1',\n          title: 'Page 1',\n          elements: []\n        }],\n        rules: [],\n        computed: []\n      };\n    }\n    addField(type) {\n      const id = 'f' + Date.now();\n      const el = {\n        id,\n        type,\n        label: type === 'text' ? 'Text field' : type + ' field'\n      };\n      if (type === 'select') {\n        el.options = ['Option 1', 'Option 2'];\n        el.optionsText = el.options.join(',');\n      }\n      this.schema.pages[0].elements.push(el);\n    }\n    updateOptions(el) {\n      el.options = (el.optionsText || '').split(',').map(s => s.trim()).filter(Boolean);\n    }\n    remove(i) {\n      this.schema.pages[0].elements.splice(i, 1);\n    }\n    save() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        const form = {\n          id: 'form-' + Date.now(),\n          name: _this.schema.title || 'Untitled',\n          version: '1.0.0',\n          schema: _this.schema,\n          createdAt: new Date().toISOString(),\n          updatedAt: new Date().toISOString()\n        };\n        yield _this.db.saveForm(form);\n        // alert('Saved form to IndexedDB. ID: ' + form.id);\n        _this.store.dispatch(loadForms());\n      })();\n    }\n    addPage() {\n      const id = 'page-' + (this.schema.pages.length + 1);\n      this.schema.pages.push({\n        id,\n        title: 'Page ' + (this.schema.pages.length + 1),\n        elements: []\n      });\n    }\n    static {\n      this.ɵfac = function BuilderComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || BuilderComponent)(i0.ɵɵdirectiveInject(i1.Store), i0.ɵɵdirectiveInject(i2.IndexedDBService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: BuilderComponent,\n        selectors: [[\"builder\"]],\n        decls: 22,\n        vars: 2,\n        consts: [[1, \"builder-wrap\"], [\"aria-label\", \"Field palette\", 1, \"palette\"], [1, \"palette-item\", 3, \"click\"], [3, \"click\"], [\"aria-label\", \"Form canvas\", 1, \"canvas\"], [1, \"pages\"], [\"class\", \"page\", 4, \"ngFor\", \"ngForOf\"], [1, \"page\"], [1, \"page-header\"], [1, \"elements\"], [\"class\", \"element\", 4, \"ngFor\", \"ngForOf\"], [1, \"element\"], [1, \"element-actions\"], [\"class\", \"editor\", 4, \"ngIf\"], [1, \"editor\"], [3, \"ngModelChange\", \"ngModel\"], [4, \"ngIf\"], [\"type\", \"checkbox\", 3, \"ngModelChange\", \"ngModel\"], [3, \"ngModelChange\", \"blur\", \"ngModel\"]],\n        template: function BuilderComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"aside\", 1)(2, \"h3\");\n            i0.ɵɵtext(3, \"Palette\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(4, \"div\", 2);\n            i0.ɵɵlistener(\"click\", function BuilderComponent_Template_div_click_4_listener() {\n              return ctx.addField(\"text\");\n            });\n            i0.ɵɵtext(5, \"Text Field\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"div\", 2);\n            i0.ɵɵlistener(\"click\", function BuilderComponent_Template_div_click_6_listener() {\n              return ctx.addField(\"number\");\n            });\n            i0.ɵɵtext(7, \"Number Field\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"div\", 2);\n            i0.ɵɵlistener(\"click\", function BuilderComponent_Template_div_click_8_listener() {\n              return ctx.addField(\"date\");\n            });\n            i0.ɵɵtext(9, \"Date Field\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(10, \"div\", 2);\n            i0.ɵɵlistener(\"click\", function BuilderComponent_Template_div_click_10_listener() {\n              return ctx.addField(\"select\");\n            });\n            i0.ɵɵtext(11, \"Select\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"div\", 2);\n            i0.ɵɵlistener(\"click\", function BuilderComponent_Template_div_click_12_listener() {\n              return ctx.addPage();\n            });\n            i0.ɵɵtext(13, \"+ Add Page\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(14, \"hr\");\n            i0.ɵɵelementStart(15, \"button\", 3);\n            i0.ɵɵlistener(\"click\", function BuilderComponent_Template_button_click_15_listener() {\n              return ctx.save();\n            });\n            i0.ɵɵtext(16, \"Save\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(17, \"main\", 4)(18, \"h2\");\n            i0.ɵɵtext(19);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"div\", 5);\n            i0.ɵɵtemplate(21, BuilderComponent_div_21_Template, 8, 2, \"div\", 6);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(19);\n            i0.ɵɵtextInterpolate(ctx.schema.title || \"Untitled\");\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngForOf\", ctx.schema.pages);\n          }\n        },\n        styles: [\".form-builder[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column;background:var(--background-color);color:var(--text-color)}.builder-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1rem 2rem;background:var(--surface-color);border-bottom:1px solid var(--border-color);box-shadow:0 2px 4px #0000001a}.builder-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600}.builder-content[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}.field-palette[_ngcontent-%COMP%]{width:250px;background:var(--surface-color);border-right:1px solid var(--border-color);padding:1rem}.field-palette[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.1rem;color:var(--text-secondary)}.field-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.field-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem;background:var(--background-color);border:1px solid var(--border-color);border-radius:6px;cursor:grab;transition:all .2s ease}.field-item[_ngcontent-%COMP%]:hover{background:var(--primary-light);border-color:var(--primary-color)}.field-item[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px;color:var(--text-secondary)}.builder-canvas[_ngcontent-%COMP%]{flex:1;padding:2rem;overflow-y:auto;background:var(--background-alt)}.form-page[_ngcontent-%COMP%]{background:var(--surface-color);border:1px solid var(--border-color);border-radius:8px;padding:1.5rem;margin-bottom:2rem;box-shadow:0 2px 8px #0000000d}.page-title[_ngcontent-%COMP%]{margin:0 0 1.5rem;font-size:1.25rem;font-weight:600;color:var(--text-primary)}.element-container[_ngcontent-%COMP%]{min-height:200px;padding:1rem;background:var(--background-alt);border:2px dashed var(--border-color);border-radius:6px}.form-element[_ngcontent-%COMP%]{background:var(--surface-color);border:1px solid var(--border-color);border-radius:6px;margin-bottom:1rem;transition:all .2s ease;cursor:pointer}.form-element[_ngcontent-%COMP%]:hover{border-color:var(--primary-color);box-shadow:0 2px 8px #0000001a}.form-element.selected[_ngcontent-%COMP%]{border-color:var(--primary-color);box-shadow:0 0 0 2px var(--primary-light)}.element-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem;background:var(--background-alt);border-bottom:1px solid var(--border-color)}.element-header[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:16px;color:var(--text-secondary);cursor:grab}.element-header[_ngcontent-%COMP%]   .element-label[_ngcontent-%COMP%]{font-weight:500;flex:1}.element-header[_ngcontent-%COMP%]   .element-type[_ngcontent-%COMP%]{font-size:.8rem;color:var(--text-secondary);background:var(--background-color);padding:.25rem .5rem;border-radius:4px}.element-preview[_ngcontent-%COMP%]{padding:1rem}.element-preview[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .element-preview[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .element-preview[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid var(--border-color);border-radius:4px;background:var(--background-color);color:var(--text-color)}.element-preview[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled, .element-preview[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:disabled, .element-preview[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.element-preview[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.element-preview[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;cursor:not-allowed}.properties-panel[_ngcontent-%COMP%]{width:300px;background:var(--surface-color);border-left:1px solid var(--border-color);padding:1rem;overflow-y:auto}.properties-panel[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:1.1rem;color:var(--text-secondary)}.no-selection[_ngcontent-%COMP%]{color:var(--text-secondary);font-style:italic;text-align:center;margin-top:2rem}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:3rem;color:var(--text-secondary)}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]{--primary-color: #3f51b5;--primary-light: #e8eaf6;--background-color: #ffffff;--background-alt: #f8f9fa;--surface-color: #ffffff;--text-color: #212529;--text-secondary: #6c757d;--border-color: #dee2e6}.dark-theme[_nghost-%COMP%], .dark-theme   [_nghost-%COMP%]{--primary-color: #7986cb;--primary-light: #303f9f;--background-color: #121212;--background-alt: #1e1e1e;--surface-color: #2d2d2d;--text-color: #e0e0e0;--text-secondary: #a0a0a0;--border-color: #404040}\"],\n        changeDetection: 0\n      });\n    }\n  }\n  return BuilderComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}